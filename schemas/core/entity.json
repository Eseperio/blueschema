{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Entity Schema",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "description": "Entity name in PascalCase format"
    },
    "tableName": {
      "type": "string",
      "description": "Database table name in snake_case format"
    },
    "fields": {
      "type": "array",
      "description": "List of entity fields",
      "items": {
        "$ref": "./field.json"
      }
    },
    "relations": {
      "type": "array",
      "description": "List of relationships with other entities",
      "items": {
        "$ref": "./relation.json"
      }
    },
    "timestamps": {
      "type": "boolean",
      "description": "Indicates whether the entity has timestamps (created_at and updated_at)",
      "default": true
    },
    "softDeletes": {
      "type": "boolean",
      "description": "Indicates whether the entity supports soft deletes (deleted_at)",
      "default": false
    },
    "hooks": {
      "type": "object",
      "description": "Lifecycle hooks that define logic to execute at specific moments",
      "properties": {
        "beforeCreate": {
          "type": "string",
          "description": "Prompt describing logic to execute before creating this entity"
        },
        "afterCreate": {
          "type": "string",
          "description": "Prompt describing logic to execute after creating this entity"
        },
        "beforeUpdate": {
          "type": "string",
          "description": "Prompt describing logic to execute before updating this entity"
        },
        "afterUpdate": {
          "type": "string",
          "description": "Prompt describing logic to execute after updating this entity"
        },
        "beforeDelete": {
          "type": "string",
          "description": "Prompt describing logic to execute before deleting this entity"
        },
        "afterDelete": {
          "type": "string",
          "description": "Prompt describing logic to execute after deleting this entity"
        },
        "beforeValidate": {
          "type": "string",
          "description": "Prompt describing logic to execute before validating this entity"
        },
        "afterValidate": {
          "type": "string",
          "description": "Prompt describing logic to execute after validating this entity"
        }
      },
      "additionalProperties": false
    }
  },
  "required": ["name", "tableName", "fields"]
}
